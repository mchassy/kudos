export FLASK_APP=/prj/kudos/kudos_oss/app/http/api/endpoints.py
export APP_CONFIG_FILE=/prj/kudos/config/development.py
export FLASK_ENV=development
export LC_ALL=C.UTF-8
export LANG=C.UTF-8
export PATH="/home/ubuntu/.local/bin:$PATH"
if [ ! -d "/builds/mapu/" ]
then
    cd /prj && pwd
    echo "#######################################################"
    echo "Running in local containerised dev environment"
    echo "#######################################################"
else
    cd /builds/mapu/kudos && pwd
    echo "#######################################################"
    echo "Running on Gitlab runner container"
    echo "#######################################################"
fi
if [ -d "./env/bin" ]
then
    source ./env/bin/activate
    echo "#######################################################"
    echo "Activating virtual environment"
    echo "#######################################################"
else
    echo "#######################################################"
    echo "Creating virtual environment"
    echo "#######################################################"
    python -m venv env
    echo "#######################################################"
    echo "Activating virtual environment"
    echo "#######################################################"
    source ./env/bin/activate
    pip install -r ./dev/requirements.txt
fi
